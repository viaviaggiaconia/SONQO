/* ========= Root / base ========= */
:root{
  --accent:#5aa9d6;
  --text:#ffffff;
  --shadow:rgba(0,0,0,.25);
  color-scheme: dark;
}

*{ box-sizing:border-box }
html,body{ height:100% }

body{
  margin:0;
  font:500 16px/1.35 system-ui,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:#0a0e1e; /* fallback */
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

/* ========= Background layer (video/immagini con crossfade) ========= */
#bg-root{ position:fixed; inset:0; overflow:hidden; z-index:-2 }
#bg-root>*{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:cover; opacity:0; transition:opacity .6s ease;
  will-change:opacity;
}
#bg-root>*.active{ opacity:1 }

/* Riduci motion per utenti sensibili */
@media (prefers-reduced-motion: reduce){
  #bg-root>*{ transition:none }
}

/* ========= Vaso (canvas + contorno) ========= */
#vase-wrap{
  position:fixed;
  left:50%; transform:translateX(-50%);
  bottom:calc(110px + env(safe-area-inset-bottom, 0px));
  width:min(420px, 72vw);
  aspect-ratio:3 / 4;
  pointer-events:none; /* pass-through */
  z-index:-1; /* dietro l’overlay, davanti allo sfondo */
  filter: drop-shadow(0 18px 40px rgba(0,0,0,.35));
}
#vaseCanvas, #vaseOutline{
  position:absolute; inset:0; width:100%; height:100%; display:block;
}
#vaseOutline{ opacity:.9 }

/* ========= Overlay UI senza card ========= */
.ui-overlay{
  position:fixed; left:0; right:0;
  bottom:env(safe-area-inset-bottom, 0px);
  padding:12px 16px calc(18px + env(safe-area-inset-bottom, 0px));
  display:grid; gap:.75rem; pointer-events:none;
  background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.20) 100%);
  z-index:10;
}
.controlbar{
  display:grid; grid-template-columns:auto 1fr auto auto; gap:.5rem;
  align-items:center; pointer-events:auto;
  backdrop-filter:blur(10px) saturate(120%);
  background:color-mix(in oklab, #000 12%, transparent 88%);
  border-radius:14px; padding:.6rem .75rem; box-shadow:0 6px 24px var(--shadow);
}
.btn{
  appearance:none; border:0; border-radius:12px; padding:.55rem .9rem;
  font-weight:600; letter-spacing:.2px; cursor:pointer; user-select:none;
  background:var(--accent); color:#05121f; box-shadow:0 2px 10px var(--shadow);
  transition:transform .06s ease;
}
.btn:active{ transform:translateY(1px) }

input[type="text"]{
  width:100%; min-width:140px;
  background:color-mix(in oklab, #fff 8%, transparent 92%);
  border:1px solid color-mix(in oklab, #fff 18%, transparent 82%);
  color:#fff; padding:.55rem .75rem; border-radius:12px;
  box-shadow:inset 0 0 0 9999px color-mix(in oklab, #000 40%, transparent 60%);
}
input::placeholder{ color:#cfe7f7b3 }

.count{
  font-variant-numeric:tabular-nums; opacity:.9; padding:0 .25rem;
}

/* ========= Accessibilità ========= */
:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:3px;
  border-radius:10px;
}

/* ========= Responsive ========= */
@media (max-width:520px){
  .controlbar{
    grid-template-columns:auto 1fr auto;
    grid-auto-rows:auto;
  }
  .count{ display:none }
}
